<div *ngIf="task && type=='task'" class="container pt-3">
  <h3>#{{task.Id}}: {{task.Name}}</h3>
  <form>
    <div class="d-flex flex-wrap">
      <div class="form-group pr-3">
        <label for="exampleInputEmail1">Исполнитель</label>
        <select [(ngModel)]="task.UserId" [ngModelOptions]="{standalone: true}"  class="form-control" id="exampleInputEmail1"  >
          <option  value="{{t.Id}}" *ngFor="let t of team">{{t.Name}}</option>
        </select>
      </div>
      <div class="form-group pr-3">
        <label for="st">Статус</label>
        <select [(ngModel)]="task.Status" [ngModelOptions]="{standalone: true}"  class="form-control" id="st">
          <option value="{{s}}" *ngFor="let s of getStatuses()">{{s}}</option>
        </select>
      </div>
      <div class="form-group pr-3">
        <label for="pr">Приоритет</label>
        <select [(ngModel)]="task.Priority" [ngModelOptions]="{standalone: true}" class="form-control" id="pr" >
          <option value="{{p}}" *ngFor="let p of getPriorities()">{{p}}</option>
        </select>
      </div>
      <div class="form-group pr-3 d-flex align-items-end">
        <button (click)="showReq()" class="btn btn-link">Требование</button>
      </div>
    </div>
    <div class="form-group">
      <label for="exampleFormControlTextarea1">Описание</label>
      <textarea [(ngModel)]="task.Description" [ngModelOptions]="{standalone: true}" class="form-control" id="exampleFormControlTextarea1" rows="6"></textarea>
    </div>
    <button *ngIf="checkTask()" (click)="ChangeTask()" type="submit" class="btn btn-primary">Сохранить</button>
  </form>
</div>
<div *ngIf="req && type=='req'" class="container pt-3">
  <h3>#{{req.Id}}: {{req.Name}}</h3>
  <form>
    
    <div class="form-group">
      <label for="st1">Статус</label>
      <select [(ngModel)]="req.Status" [ngModelOptions]="{standalone: true}"  class="form-control" id="st1" [disabled]="readonly">
        <option value="{{s}}" *ngFor="let s of getStatuses()">{{s}}</option>
      </select>
    </div>
    <div class="form-group">
      <label for="exampleFormControlTextarea1">Описание</label>
      <textarea [(ngModel)]="req.Description"  [ngModelOptions]="{standalone: true}" value="{{req.Description}}" class="form-control" id="exampleFormControlTextarea1" rows="6" [readonly]="readonly"></textarea>
    </div>
    <button *ngIf="checkReq()" class="btn btn-primary" (click)="ChangeReq()">Сохранить</button>
  </form>
  <ul  class="list-group my-3">
    <li [ngStyle]="{'background-color':(parts[0]?'white':'')}"  [ngClass]="{'p-3':parts[0], 'p-0':!parts[0]}" class="list-group-item dropdown"  >
        <h5 class="d-block py-3 m-0 {{parts[0]?'pr-3':'px-3'}}" (click)="showPart(0)" style="cursor:pointer">Задачи</h5>
      <div [ngStyle]="{'display':(parts[0]?'block':'none')}" class="dropdown-menu position-relative w-100 m-0 border-0" >
        <div (click)="open('task',e.Id)"  class="card mb-3 flex-sm-row align-items-center " *ngFor="let e of req.Tasks">
          <div class="card-body d-sm-flex justify-content-sm-between align-items-center">
            <h6  class="card-title m-sm-0">{{e.Name}}</h6>
            <div class="d-inline-flex justify-content-around" >
                <span class="badge  " [ngClass]="{'bg-warning':e.Status=='Active', 'border border-success':e.Status=='Resolved', 'badge-info':e.Status!='Resolved', 'bg-success':e.Status=='Closed'}">{{e.Status}}</span>
            </div>
            
          </div>
        </div>
        <div class="btn-group" role="group" aria-label="Basic example">
          <button type="button" class="btn btn-success" (click)="add('task')" >Добавить</button>
        </div>
      </div>
    </li>
  </ul>
</div>
